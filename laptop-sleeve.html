<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laptop Sleeve Calculator</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        select, input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        .formula {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-family: monospace;
        }
        .results {
            margin-top: 1rem;
            padding: 1rem;
            background: #f0f9ff;
            border-radius: 4px;
        }
        svg {
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            background: white;
        }
    </style>
</head>
<body>
    <h1>Laptop Sleeve Calculator</h1>
    
    <div class="container">
        <div class="input-section">
            <div class="form-group">
                <label for="laptopSelect">Common Laptop Sizes:</label>
                <select id="laptopSelect" onchange="updateFromPreset()">
                    <option value="">Custom Size</option>
                    <option value="macbook-air-13">MacBook Air 13" (11.97 x 8.36 x 0.63)</option>
                    <option value="macbook-pro-14">MacBook Pro 14" (12.31 x 8.71 x 0.61)</option>
                    <option value="macbook-pro-16">MacBook Pro 16" (14.01 x 9.77 x 0.66)</option>
                    <option value="surface-laptop-13">Surface Laptop 13.5" (12.1 x 8.8 x 0.57)</option>
                    <option value="thinkpad-x1">ThinkPad X1 14" (12.71 x 8.54 x 0.59)</option>
                    <option value="generic-15">Generic 15" Laptop (14.13 x 9.73 x 0.71)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Laptop Dimensions (inches):</label>
                <input type="number" id="width" placeholder="Width" step="0.01" onchange="calculate()">
                <input type="number" id="length" placeholder="Length" step="0.01" onchange="calculate()">
                <input type="number" id="height" placeholder="Height" step="0.01" onchange="calculate()">
            </div>

            <div class="formula">
                <h3>Formulas:</h3>
                <p>Template Width (TW) = W + 2(H+0.25) + 0.5</p>
                <p>Template Length (TL) = (L+0.25)(2) + (H+0.25)(4) + (L+0.25)(0.5)</p>
                <p>Taper Angle Offset (TAO) = 0.10(TW) ≈ 1.625"</p>
            </div>

            <div class="results" id="results">
                <h3>Calculations:</h3>
                <p>Template Width: <span id="templateWidth">-</span>"</p>
                <p>Template Length: <span id="templateLength">-</span>"</p>
                <p>Taper Angle Offset: <span id="taperAngleOffset">-</span>"</p>
            </div>
        </div>

        <div class="svg-section">
            <div id="svgContainer"></div>
        </div>
    </div>

    <script>
        const laptopSizes = {
            'macbook-air-13': { width: 11.97, length: 8.36, height: 0.63 },
            'macbook-pro-14': { width: 12.31, length: 8.71, height: 0.61 },
            'macbook-pro-16': { width: 14.01, length: 9.77, height: 0.66 },
            'surface-laptop-13': { width: 12.1, length: 8.8, height: 0.57 },
            'thinkpad-x1': { width: 12.71, length: 8.54, height: 0.59 },
            'generic-15': { width: 14.13, length: 9.73, height: 0.71 }
        };

        function updateHash() {
            const width = document.getElementById('width').value;
            const length = document.getElementById('length').value;
            const height = document.getElementById('height').value;
            const preset = document.getElementById('laptopSelect').value;
            
            const params = new URLSearchParams();
            if (preset) params.set('preset', preset);
            if (width) params.set('width', width);
            if (length) params.set('length', length);
            if (height) params.set('height', height);
            
            window.location.hash = params.toString();
        }

        function loadFromHash() {
            const params = new URLSearchParams(window.location.hash.slice(1));
            
            const preset = params.get('preset');
            if (preset) {
                document.getElementById('laptopSelect').value = preset;
                updateFromPreset();
            } else {
                const width = params.get('width');
                const length = params.get('length');
                const height = params.get('height');
                
                if (width) document.getElementById('width').value = width;
                if (length) document.getElementById('length').value = length;
                if (height) document.getElementById('height').value = height;
                
                if (width || length || height) calculate();
            }
        }

        function updateFromPreset() {
            const select = document.getElementById('laptopSelect');
            const size = laptopSizes[select.value];
            
            if (size) {
                document.getElementById('width').value = size.width;
                document.getElementById('length').value = size.length;
                document.getElementById('height').value = size.height;
                calculate();
            }
            updateHash();
        }

        function calculate() {
            const width = parseFloat(document.getElementById('width').value) || 0;
            const length = (parseFloat(document.getElementById('length').value) || 0) + 0.25
            const height = (parseFloat(document.getElementById('height').value) || 0) + 0.25;

            // Calculate template dimensions
            const templateWidth = width + (2 * height) + 0.5;
            const templateLength = (length * 2) + (height * 4) + (length * 0.5);
            const taperAngleOffset = templateWidth * 0.10;
            const flapHeight = length / 2;

            // Update results
            document.getElementById('templateWidth').textContent = `${width} + 2(${height}) + 0.5 = ${templateWidth.toFixed(2)}`;
            document.getElementById('templateLength').textContent = `${length}(2) + ${height}(4) + ${length}(0.5) = ${templateLength.toFixed(2)}`;
            document.getElementById('taperAngleOffset').textContent = `${templateWidth.toFixed(2)} × 0.10 = ${taperAngleOffset.toFixed(2)}`;

            // Generate SVG
            generateSVG(templateWidth, templateLength, taperAngleOffset, flapHeight, length);
            updateHash();
        }

        function generateSVG(templateWidth, templateLength, taperAngleOffset, flapHeight, laptopLength) {
            const scale = 20;
            const svgWidth = (templateWidth * scale) + 120; // Increased width padding
            const svgHeight = (templateLength * scale) + 120; // Increased height padding

            const svg = `
                <svg width="${svgWidth}" height="${svgHeight}" viewBox="0 0 ${svgWidth} ${svgHeight}">
                    <g transform="translate(60, 40)"> <!-- Increased left padding -->
                        <!-- Main template outline -->
                        <path d="
                            M 0,${templateLength * scale}
                            L 0,${(flapHeight) * scale}
                            L ${taperAngleOffset * scale},0
                            L ${(templateWidth - taperAngleOffset) * scale},0
                            L ${templateWidth * scale},${flapHeight * scale}
                            L ${templateWidth * scale},${templateLength * scale}
                            Z
                        " 
                        fill="none" 
                        stroke="black" 
                        stroke-width="2"/>

                        <!-- Horizontal dotted lines -->
                        <!-- Top flap -->
                        <text x="-10" y="${(flapHeight/2) * scale}" text-anchor="end" dominant-baseline="middle">${flapHeight}"</text>
                        <line x1="0" y1="${flapHeight * scale}" x2="${templateWidth * scale}" y2="${flapHeight * scale}" 
                            stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
                        <!-- First fold section -->
                        <text x="-10" y="${(flapHeight + 1) * scale + 5}" text-anchor="end" dominant-baseline="middle">2"</text>
                        <line x1="0" y1="${(flapHeight + 2) * scale}" x2="${templateWidth * scale}" y2="${(flapHeight + 2) * scale}" 
                            stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
                        <!-- Second fold section -->
                        <text x="-10" y="${(flapHeight + 2.5) * scale + 5}" text-anchor="end" dominant-baseline="middle">1"</text>
                        <line x1="0" y1="${(flapHeight + 3) * scale}" x2="${templateWidth * scale}" y2="${(flapHeight + 3) * scale}" 
                            stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
                        <!-- Main laptop compartment -->
                        <text x="-10" y="${(flapHeight + 3 + laptopLength/2) * scale + 5}" text-anchor="end" dominant-baseline="middle">${laptopLength}"</text>
                        <line x1="0" y1="${(flapHeight + 3 + laptopLength) * scale}" x2="${templateWidth * scale}" y2="${(flapHeight + 3 + laptopLength) * scale}" 
                            stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
                        <!-- Bottom fold section -->
                        <text x="-10" y="${(flapHeight + 3.5 + laptopLength) * scale + 5}" text-anchor="end" dominant-baseline="middle">1"</text>
                        <line x1="0" y1="${(flapHeight + 4 + laptopLength) * scale}" x2="${templateWidth * scale}" y2="${(flapHeight + 4 + laptopLength) * scale}" 
                            stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
                        <!-- Back panel -->
                        <text x="-10" y="${(flapHeight + 5 + laptopLength + laptopLength/2) * scale + 5}" text-anchor="end" dominant-baseline="middle">${laptopLength}"</text>

                        <!-- Dimension lines and text -->
                        <text x="${(templateWidth * scale) / 2}" y="-10" text-anchor="middle">${templateWidth.toFixed(2)}"</text>
                        <text x="${templateWidth * scale + 25}" y="${templateLength * scale / 2}" text-anchor="middle" transform="rotate(90 ${templateWidth * scale + 25},${templateLength * scale / 2})">${templateLength.toFixed(2)}"</text>
                    
                        <!-- Center hole -->
                        <circle cx="${(templateWidth * scale) / 2}" cy="${templateLength * scale}" r="${0.625 * scale}" fill="none" stroke="black"/>

                        <text x="${(templateWidth * scale) / 2}" y="${templateLength * scale + 25}" text-anchor="middle">1.25" Dia</text>
                        <text x="${templateWidth * scale + 10}" y="${templateLength * scale + 25}" text-anchor="start">1.5"</text>
                      
                        <!-- Keeper -->
                        <rect x="0" y="${templateLength * scale + 40}" 
                              width="${templateWidth * scale}" height="${1.5 * scale}"
                              fill="none" stroke="black" stroke-width="2"/>
                        <text x="-10" y="${templateLength * scale + 40 + (1.5 * scale)/2}" text-anchor="end" dominant-baseline="middle">1.5"</text>
                        

                    </g>
                </svg>
            `;

            document.getElementById('svgContainer').innerHTML = svg;
        }

        // Load from hash on page load
        window.addEventListener('load', loadFromHash);

        // Initialize with MacBook Pro 16" if no hash present
        if (!window.location.hash) {
            document.getElementById('laptopSelect').value = 'macbook-pro-16';
            updateFromPreset();
        }
    </script>
</body>
</html>
